{% extends 'base.html' %}

{% block content %}
  <h2>Your Cart</h2>

  {% if cart_items %}
    <ul>
      {% for item in cart_items %}
        <li>
          <strong>{{ item.product.name }}</strong><br>
          ₹{{ item.product.price }} × {{ item.quantity }} = ₹{{ item.subtotal }}<br>

          <form action="{% url 'update_cart_item' item.id %}" method="post">
            {% csrf_token %}
            <input type="number" name="quantity" value="{{ item.quantity }}" min="1">
            <button type="submit">Update</button>
          </form>

          <form action="{% url 'remove_cart_item' item.id %}" method="post">
            {% csrf_token %}
            <button type="submit">Remove</button>
          </form>
        </li>
      {% endfor %}
    </ul>

    <p><strong>Total:</strong> ₹{{ total_price }}</p>
    <a href="{% url 'place_order' %}">Proceed to Checkout</a>

  {% else %}
    <p>Your cart is empty.</p>
  {% endif %}
{% endblock %}
